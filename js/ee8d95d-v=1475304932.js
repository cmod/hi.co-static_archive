/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */
(function(x){x.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var E=document.createElement("div");var r={};function G(a){if(a in E.style){return a}var b=["Moz","Webkit","O","ms"];var e=a.charAt(0).toUpperCase()+a.substr(1);if(a in E.style){return a}for(var c=0;c<b.length;++c){var d=b[c]+e;if(d in E.style){return d}}}function D(){E.style[r.transform]="";E.style[r.transform]="rotateY(90deg)";return E.style[r.transform]!==""}var H=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;r.transition=G("transition");r.transitionDelay=G("transitionDelay");r.transform=G("transform");r.transformOrigin=G("transformOrigin");r.transform3d=D();var z={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var C=r.transitionEnd=z[r.transition]||null;for(var s in r){if(r.hasOwnProperty(s)&&typeof x.support[s]==="undefined"){x.support[s]=r[s]}}E=null;x.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};x.cssHooks["transit:transform"]={get:function(a){return x(a).data("transform")||new y()},set:function(b,c){var a=c;if(!(a instanceof y)){a=new y(a)}if(r.transform==="WebkitTransform"&&!H){b.style[r.transform]=a.toString(true)}else{b.style[r.transform]=a.toString()}x(b).data("transform",a)}};x.cssHooks.transform={set:x.cssHooks["transit:transform"].set};if(x.fn.jquery<"1.8"){x.cssHooks.transformOrigin={get:function(a){return a.style[r.transformOrigin]},set:function(b,a){b.style[r.transformOrigin]=a}};x.cssHooks.transition={get:function(a){return a.style[r.transition]},set:function(b,a){b.style[r.transition]=a}}}u("scale");u("translate");u("rotate");u("rotateX");u("rotateY");u("rotate3d");u("perspective");u("skewX");u("skewY");u("x",true);u("y",true);function y(a){if(typeof a==="string"){this.parse(a)}return this}y.prototype={setFromString:function(a,b){var c=(typeof b==="string")?b.split(","):(b.constructor===Array)?b:[b];c.unshift(a);y.prototype.set.apply(this,c)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);if(this.setter[a]){this.setter[a].apply(this,b)}else{this[a]=b.join(",")}},get:function(a){if(this.getter[a]){return this.getter[a].apply(this)}else{return this[a]||0}},setter:{rotate:function(a){this.rotate=t(a,"deg")},rotateX:function(a){this.rotateX=t(a,"deg")},rotateY:function(a){this.rotateY=t(a,"deg")},scale:function(b,a){if(a===undefined){a=b}this.scale=b+","+a},skewX:function(a){this.skewX=t(a,"deg")},skewY:function(a){this.skewY=t(a,"deg")},perspective:function(a){this.perspective=t(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(b,a){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(b!==null&&b!==undefined){this._translateX=t(b,"px")}if(a!==null&&a!==undefined){this._translateY=t(a,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");if(a[0]){a[0]=parseFloat(a[0])}if(a[1]){a[1]=parseFloat(a[1])}return(a[0]===a[1])?a[0]:a},rotate3d:function(){var a=(this.rotate3d||"0,0,0,0deg").split(",");for(var b=0;b<=3;++b){if(a[b]){a[b]=parseFloat(a[b])}}if(a[3]){a[3]=t(a[3],"deg")}return a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,c,d){b.setFromString(c,d)})},toString:function(a){var b=[];for(var c in this){if(this.hasOwnProperty(c)){if((!r.transform3d)&&((c==="rotateX")||(c==="rotateY")||(c==="perspective")||(c==="transformOrigin"))){continue}if(c[0]!=="_"){if(a&&(c==="scale")){b.push(c+"3d("+this[c]+",1)")}else{if(a&&(c==="translate")){b.push(c+"3d("+this[c]+",0)")}else{b.push(c+"("+this[c]+")")}}}}}return b.join(" ")}};function v(b,c,a){if(c===true){b.queue(a)}else{if(c){b.queue(c,a)}else{a()}}}function A(a){var b=[];x.each(a,function(c){c=x.camelCase(c);c=x.transit.propertyMap[c]||x.cssProps[c]||c;c=F(c);if(x.inArray(c,b)===-1){b.push(c)}});return b}function B(f,c,a,g){var e=A(f);if(x.cssEase[a]){a=x.cssEase[a]}var b=""+w(c)+" "+a;if(parseInt(g,10)>0){b+=" "+w(g)}var d=[];x.each(e,function(h,i){d.push(i+" "+b)});return d.join(", ")}x.fn.transition=x.fn.transit=function(f,n,g,c){var b=this;var k=0;var i=true;if(typeof n==="function"){c=n;n=undefined}if(typeof g==="function"){c=g;g=undefined}if(typeof f.easing!=="undefined"){g=f.easing;delete f.easing}if(typeof f.duration!=="undefined"){n=f.duration;delete f.duration}if(typeof f.complete!=="undefined"){c=f.complete;delete f.complete}if(typeof f.queue!=="undefined"){i=f.queue;delete f.queue}if(typeof f.delay!=="undefined"){k=f.delay;delete f.delay}if(typeof n==="undefined"){n=x.fx.speeds._default}if(typeof g==="undefined"){g=x.cssEase._default}n=w(n);var m=B(f,n,g,k);var d=x.transit.enabled&&r.transition;var l=d?(parseInt(n,10)+parseInt(k,10)):0;if(l===0){var e=function(o){b.css(f);if(c){c.apply(b)}if(o){o()}};v(b,i,e);return b}var h={};var a=function(o){var p=false;var q=function(){if(p){b.unbind(C,q)}if(l>0){b.each(function(){this.style[r.transition]=(h[this]||null)})}if(typeof c==="function"){c.apply(b)}if(typeof o==="function"){o()}};if((l>0)&&(C)&&(x.transit.useTransitionEnd)){p=true;b.bind(C,q)}else{window.setTimeout(q,l)}b.each(function(){if(l>0){this.style[r.transition]=m}x(this).css(f)})};var j=function(o){this.offsetWidth;a(o)};v(b,i,j);return this};function u(a,b){if(!b){x.cssNumber[a]=true}x.transit.propertyMap[a]=r.transform;x.cssHooks[a]={get:function(c){var d=x(c).css("transit:transform");return d.get(a)},set:function(d,c){var e=x(d).css("transit:transform");e.setFromString(a,c);x(d).css({"transit:transform":e})}}}function F(a){return a.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})}function t(a,b){if((typeof a==="string")&&(!a.match(/^[\-0-9\.]+$/))){return a}else{return""+a+b}}function w(a){var b=a;if(x.fx.speeds[b]){b=x.fx.speeds[b]}return t(b,"ms")}x.transit.getTransitionValue=B})(jQuery);
HI.UI.Map=function(a){this.map=$("#"+a.containerId).hitomap();this.sketches=[]};HI.UI.Map.prototype=(function(){var b=4;function d(h){if(!h){throw new Error("Sketches in array expected")}var f=this;this.sketches=this.sketches.concat(h);for(var g=0;g<this.sketches.length;g++){var j=this.sketches[g];$().hitomap("addMarkerWithInfobox",this.map,j,false,function(k,i){a.call(f,j.place.cityId,k,i)})}}function c(f){$("#place_"+f).trigger("mouseover")}function a(i,g,f){var h=this;$("#place_"+i).on("mouseover",function(){e(h.map.getZoom());$().hitomap("showInfoBox",f,g,h.map)})}function e(g){if(g>=b){return}else{var f=this;var h=google.maps.event.addListener(map,"zoom_changed",function(i){google.maps.event.removeListener(h);e(g+1)});setTimeout(function(){f.map.setZoom(g)},80)}}return{renderSketches:d,focusLocation:c}}());
HI.Controller.PersonIndex=(function(){var a;function b(){a=new HI.UI.Map({containerId:"hitotoki_map-profile"})}return{init:b,getMap:function(){return a}}}());
/*!
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function InfoBox(a){a=a||{};google.maps.OverlayView.apply(this,arguments);this.content_=a.content||"";this.disableAutoPan_=a.disableAutoPan||false;this.maxWidth_=a.maxWidth||0;this.pixelOffset_=a.pixelOffset||new google.maps.Size(0,0);this.position_=a.position||new google.maps.LatLng(0,0);this.zIndex_=a.zIndex||null;this.boxClass_=a.boxClass||"infoBox";this.boxStyle_=a.boxStyle||{};this.closeBoxMargin_=a.closeBoxMargin||"2px";this.closeBoxURL_=a.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif";if(a.closeBoxURL===""){this.closeBoxURL_=""}this.infoBoxClearance_=a.infoBoxClearance||new google.maps.Size(1,1);if(typeof a.visible==="undefined"){if(typeof a.isHidden==="undefined"){a.visible=true}else{a.visible=!a.isHidden}}this.isHidden_=!a.visible;this.alignBottom_=a.alignBottom||false;this.pane_=a.pane||"floatPane";this.enableEventPropagation_=a.enableEventPropagation||false;this.div_=null;this.closeListener_=null;this.moveListener_=null;this.contextListener_=null;this.eventListeners_=null;this.fixedWidthSet_=null}InfoBox.prototype=new google.maps.OverlayView();InfoBox.prototype.createInfoBoxDiv_=function(){var b;var a;var f;var c=this;var d=function(g){g.cancelBubble=true;if(g.stopPropagation){g.stopPropagation()}};var e=function(g){g.returnValue=false;if(g.preventDefault){g.preventDefault()}if(!c.enableEventPropagation_){d(g)}};if(!this.div_){this.div_=document.createElement("div");this.setBoxStyle_();if(typeof this.content_.nodeType==="undefined"){this.div_.innerHTML=this.getCloseBoxImg_()+this.content_}else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(this.content_)}this.getPanes()[this.pane_].appendChild(this.div_);this.addClickHandler_();if(this.div_.style.width){this.fixedWidthSet_=true}else{if(this.maxWidth_!==0&&this.div_.offsetWidth>this.maxWidth_){this.div_.style.width=this.maxWidth_;this.div_.style.overflow="auto";this.fixedWidthSet_=true}else{f=this.getBoxWidths_();this.div_.style.width=(this.div_.offsetWidth-f.left-f.right)+"px";this.fixedWidthSet_=false}}this.panBox_(this.disableAutoPan_);if(!this.enableEventPropagation_){this.eventListeners_=[];a=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];for(b=0;b<a.length;b++){this.eventListeners_.push(google.maps.event.addDomListener(this.div_,a[b],d))}this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(g){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",e);google.maps.event.trigger(this,"domready")}};InfoBox.prototype.getCloseBoxImg_=function(){var a="";if(this.closeBoxURL_!==""){a="<img";a+=" src='"+this.closeBoxURL_+"'";a+=" align=right";a+=" style='";a+=" position: relative;";a+=" cursor: pointer;";a+=" margin: "+this.closeBoxMargin_+";";a+="'>"}return a};InfoBox.prototype.addClickHandler_=function(){var a;if(this.closeBoxURL_!==""){a=this.div_.firstChild;this.closeListener_=google.maps.event.addDomListener(a,"click",this.getCloseClickHandler_())}else{this.closeListener_=null}};InfoBox.prototype.getCloseClickHandler_=function(){var a=this;return function(b){b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}google.maps.event.trigger(a,"closeclick");a.close()}};InfoBox.prototype.panBox_=function(o){var d;var b;var m=0,i=0;if(!o){d=this.getMap();if(d instanceof google.maps.Map){if(!d.getBounds().contains(this.position_)){d.setCenter(this.position_)}b=d.getBounds();var q=d.getDiv();var j=q.offsetWidth;var l=q.offsetHeight;var f=this.pixelOffset_.width;var e=this.pixelOffset_.height;var k=this.div_.offsetWidth;var p=this.div_.offsetHeight;var h=this.infoBoxClearance_.width;var g=this.infoBoxClearance_.height;var a=this.getProjection().fromLatLngToContainerPixel(this.position_);if(a.x<(-f+h)){m=a.x+f-h}else{if((a.x+k+f+h)>j){m=a.x+k+f+h-j}}if(this.alignBottom_){if(a.y<(-e+g+p)){i=a.y+e-g-p}else{if((a.y+e+g)>l){i=a.y+e+g-l}}}else{if(a.y<(-e+g)){i=a.y+e-g}else{if((a.y+p+e+g)>l){i=a.y+p+e+g-l}}}if(!(m===0&&i===0)){var n=d.getCenter();d.panBy(m,i)}}}};InfoBox.prototype.setBoxStyle_=function(){var a,b;if(this.div_){this.div_.className=this.boxClass_;this.div_.style.cssText="";b=this.boxStyle_;for(a in b){if(b.hasOwnProperty(a)){this.div_.style[a]=b[a]}}if(typeof this.div_.style.opacity!=="undefined"&&this.div_.style.opacity!==""){this.div_.style.filter="alpha(opacity="+(this.div_.style.opacity*100)+")"}this.div_.style.position="absolute";this.div_.style.visibility="hidden";if(this.zIndex_!==null){this.div_.style.zIndex=this.zIndex_}}};InfoBox.prototype.getBoxWidths_=function(){var a;var c={top:0,bottom:0,left:0,right:0};var b=this.div_;if(document.defaultView&&document.defaultView.getComputedStyle){a=b.ownerDocument.defaultView.getComputedStyle(b,"");if(a){c.top=parseInt(a.borderTopWidth,10)||0;c.bottom=parseInt(a.borderBottomWidth,10)||0;c.left=parseInt(a.borderLeftWidth,10)||0;c.right=parseInt(a.borderRightWidth,10)||0}}else{if(document.documentElement.currentStyle){if(b.currentStyle){c.top=parseInt(b.currentStyle.borderTopWidth,10)||0;c.bottom=parseInt(b.currentStyle.borderBottomWidth,10)||0;c.left=parseInt(b.currentStyle.borderLeftWidth,10)||0;c.right=parseInt(b.currentStyle.borderRightWidth,10)||0}}}return c};InfoBox.prototype.onRemove=function(){if(this.div_){this.div_.parentNode.removeChild(this.div_);this.div_=null}};InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var a=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=(a.x+this.pixelOffset_.width)+"px";if(this.alignBottom_){this.div_.style.bottom=-(a.y+this.pixelOffset_.height)+"px"}else{this.div_.style.top=(a.y+this.pixelOffset_.height)+"px"}if(this.isHidden_){this.div_.style.visibility="hidden"}else{this.div_.style.visibility="visible"}};InfoBox.prototype.setOptions=function(a){if(typeof a.boxClass!=="undefined"){this.boxClass_=a.boxClass;this.setBoxStyle_()}if(typeof a.boxStyle!=="undefined"){this.boxStyle_=a.boxStyle;this.setBoxStyle_()}if(typeof a.content!=="undefined"){this.setContent(a.content)}if(typeof a.disableAutoPan!=="undefined"){this.disableAutoPan_=a.disableAutoPan}if(typeof a.maxWidth!=="undefined"){this.maxWidth_=a.maxWidth}if(typeof a.pixelOffset!=="undefined"){this.pixelOffset_=a.pixelOffset}if(typeof a.alignBottom!=="undefined"){this.alignBottom_=a.alignBottom}if(typeof a.position!=="undefined"){this.setPosition(a.position)}if(typeof a.zIndex!=="undefined"){this.setZIndex(a.zIndex)}if(typeof a.closeBoxMargin!=="undefined"){this.closeBoxMargin_=a.closeBoxMargin}if(typeof a.closeBoxURL!=="undefined"){this.closeBoxURL_=a.closeBoxURL}if(typeof a.infoBoxClearance!=="undefined"){this.infoBoxClearance_=a.infoBoxClearance}if(typeof a.isHidden!=="undefined"){this.isHidden_=a.isHidden}if(typeof a.visible!=="undefined"){this.isHidden_=!a.visible}if(typeof a.enableEventPropagation!=="undefined"){this.enableEventPropagation_=a.enableEventPropagation}if(this.div_){this.draw()}};InfoBox.prototype.setContent=function(a){this.content_=a;if(this.div_){if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null}if(!this.fixedWidthSet_){this.div_.style.width=""}if(typeof a.nodeType==="undefined"){this.div_.innerHTML=this.getCloseBoxImg_()+a}else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(a)}if(!this.fixedWidthSet_){this.div_.style.width=this.div_.offsetWidth+"px";if(typeof a.nodeType==="undefined"){this.div_.innerHTML=this.getCloseBoxImg_()+a}else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(a)}}this.addClickHandler_()}google.maps.event.trigger(this,"content_changed")};InfoBox.prototype.setPosition=function(a){this.position_=a;if(this.div_){this.draw()}google.maps.event.trigger(this,"position_changed")};InfoBox.prototype.setZIndex=function(a){this.zIndex_=a;if(this.div_){this.div_.style.zIndex=a}google.maps.event.trigger(this,"zindex_changed")};InfoBox.prototype.setVisible=function(a){this.isHidden_=!a;if(this.div_){this.div_.style.visibility=(this.isHidden_?"hidden":"visible")}};InfoBox.prototype.getContent=function(){return this.content_};InfoBox.prototype.getPosition=function(){return this.position_};InfoBox.prototype.getZIndex=function(){return this.zIndex_};InfoBox.prototype.getVisible=function(){var a;if((typeof this.getMap()==="undefined")||(this.getMap()===null)){a=false}else{a=!this.isHidden_}return a};InfoBox.prototype.show=function(){this.isHidden_=false;if(this.div_){this.div_.style.visibility="visible"}};InfoBox.prototype.hide=function(){this.isHidden_=true;if(this.div_){this.div_.style.visibility="hidden"}};InfoBox.prototype.open=function(c,a){var b=this;if(a){this.position_=a.getPosition();this.moveListener_=google.maps.event.addListener(a,"position_changed",function(){b.setPosition(this.getPosition())})}this.setMap(c);if(this.div_){this.panBox_()}};InfoBox.prototype.close=function(){var a;if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null}if(this.eventListeners_){for(a=0;a<this.eventListeners_.length;a++){google.maps.event.removeListener(this.eventListeners_[a])}this.eventListeners_=null}if(this.moveListener_){google.maps.event.removeListener(this.moveListener_);this.moveListener_=null}if(this.contextListener_){google.maps.event.removeListener(this.contextListener_);this.contextListener_=null}this.setMap(null)};
(function(b){var a;$(function(){if(b.FB_IS_READY){new a()}else{b.fbready=function(){new a()}}});a=(function(){function c(){this.initBtns()}c.prototype.getLoginStatus=function(){var d=this;FB.getLoginStatus(function(e){if(e.status=="connected"){d.authResponse=e.authResponse}d.initBtns()})};c.prototype.initBtns=function(){var d=this;$("#facebookLogout").click(function(g){if(g&&g.preventDefault){g.preventDefault()}var f=$(this);f.prop("enabled",false);d.logout(g)});$("#facebookLogin").click(function(g){if(g&&g.preventDefault){g.preventDefault()}var f=$(this);f.prop("enabled",false);FB.login(function(e){f.prop("enabled",true);if(e.authResponse){d.authResponse=e.authResponse;d.login()}else{alert("Oops, An Error occured with Facebook... We'll look into that!")}},{scope:$("#facebookLogin").data("permissions")})})};c.prototype.logout=function(d){if(d&&d.preventDefault){d.preventDefault()}$.ajax({url:$("#facebookLogout").data("action"),method:"get",}).always(function(){b.location.reload()})};c.prototype.login=function(d){if(d&&d.preventDefault){d.preventDefault()}$.ajax({url:$("#facebookLogin").data("action"),method:"post",data:this.authResponse}).done(function(e){b.location.reload()})};return c})()})(this);
(function(d,a){var c;var b={renderMap:function(f){var h=[{elementType:"labels.text.fill",stylers:[{color:"#6e6f62"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#61dbee"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#f7f6f0"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#6e6f62"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{saturation:-88},{hue:"#aaff00"},{gamma:1.42}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#abaaa7"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#a6e3c8"}]},{featureType:"poi.school",elementType:"geometry.fill",stylers:[{visibility:"off"},{color:"#ffa5a4"}]},{featureType:"poi.medical",elementType:"geometry.fill",stylers:[{color:"#dddfd3"},{visibility:"on"},{gamma:1.31}]},{featureType:"poi.place_of_worship",elementType:"labels.icon",stylers:[{gamma:1.45}]},{featureType:"poi.park",elementType:"labels.icon",stylers:[{gamma:1.28}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{color:"#dddfd3"},{gamma:1.31}]},{featureType:"poi.government",elementType:"geometry",stylers:[{color:"#dddfd3"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{saturation:-67},{lightness:54},{gamma:0.98},{visibility:"simplified"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#6e6f62"}]},{featureType:"transit",stylers:[{saturation:-54},{gamma:1.26}]},{featureType:"transit",elementType:"labels.icon",stylers:[{gamma:1.42},{lightness:50}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#babbad"}]},{featureType:"transit",stylers:[{visibility:"simplified"}]},{featureType:"transit",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#dddfd3"},{gamma:1.31}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#abaaa7"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#babbad"},{gamma:1.22}]},{featureType:"poi.business",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]}];var g=new a.maps.StyledMapType(h,{name:"Styled Map"});var j={center:new a.maps.LatLng(-34.397,150.644),zoom:4,scrollwheel:false,panControl:false,zoomControlOptions:{style:a.maps.ZoomControlStyle.SMALL},mapTypeControl:false,overviewMapControl:false,mapTypeId:a.maps.MapTypeId.ROADMAP,streetViewControl:false};f=f||{};d.extend(j,f);f=j;var i=new a.maps.Map(this.get(0),f);i.mapTypes.set("map_style",g);i.setMapTypeId("map_style");return i},addMarkerWithInfobox:function(h,j,i,l){var g=b.addMarker.call(this,h,{lat:j.coordinates.lat,lng:j.coordinates.lng});var f=b.addInfobox.call(this,g,h,j,i);var k=new a.maps.LatLng(j.coordinates.lat,j.coordinates.lng);if(!h.allmarkers){h.allmarkers=[]}h.allmarkers.push(g);if(!h.allinfoboxes){h.allinfoboxes={}}h.allinfoboxes[h.allmarkers.length-1]=f;l.call(this,g,f)},addMarker:function(i,g){var h=new a.maps.MarkerImage("/bundles/hitomain/images/hitopin_retina2.png",new a.maps.Size(18,24),new a.maps.Point(0,0),new a.maps.Point(9,12),new a.maps.Size(18,24));var k=new a.maps.MarkerImage("/bundles/hitomain/images/shadow-hitopin_retina.png",new a.maps.Size(32,24),new a.maps.Point(0,0),new a.maps.Point(10,19),new a.maps.Size(32,24));var j=new a.maps.LatLng(g.lat,g.lng);var f=new a.maps.Marker({position:j,map:i,icon:h,shadow:k});if(!i.allmarkers){i.allmarkers=[]}i.allmarkers.push(f);return f},addInfobox:function(g,j,l,k,h){var i=e(l,k);if(h===undefined||h===null){var h={disableAutoPan:false,content:i,maxWidth:0,pixelOffset:new a.maps.Size(-30,-70),zIndex:1000,boxStyle:{width:"auto"},infoBoxClearance:new a.maps.Size(10,105),isHidden:true,pane:"floatPane",enableEventPropagation:false,closeBoxURL:""}}var f=new InfoBox(h);a.maps.event.addListener(g,"click",function(){b.showInfoBox.call(this,f,g,j)});return f},showInfoBox:function(f,h,j,i){if(c!==undefined){c.setVisible(false)}f.open(j,h);f.setVisible(true);c=f;j.panTo(h.getPosition());if(j.allmarkers){var g,k;for(g in j.allmarkers){k=j.allmarkers[g];k.setIcon(new a.maps.MarkerImage("/bundles/hitomain/images/hitopin_retina2.png",new a.maps.Size(18,24),new a.maps.Point(0,0),new a.maps.Point(9,12),new a.maps.Size(18,24)))}h.setIcon(new a.maps.MarkerImage("/bundles/hitomain/images/hitopin_retina2_hover.png",new a.maps.Size(18,24),new a.maps.Point(0,0),new a.maps.Point(9,12),new a.maps.Size(18,24)))}},centerMapToBounds:function(h){function j(k,i){var s=k.mapTypes.get(k.getMapTypeId()).maxZoom||21;var l=k.mapTypes.get(k.getMapTypeId()).minZoom||0;var n=k.getProjection().fromLatLngToPoint(i.getNorthEast());var p=k.getProjection().fromLatLngToPoint(i.getSouthWest());var o=Math.abs(n.x-p.x);var m=Math.abs(n.y-p.y);var r=40;for(var q=s;q>=l;--q){if(o*(1<<q)+2*r<d(k.getDiv()).width()&&m*(1<<q)+2*r<d(k.getDiv()).height()){return q}}return 0}if(h.allmarkers.length==0){return}if(h.allmarkers.length==1){h.setCenter(h.allmarkers[0].getPosition(),12);return h}if(h.allmarkers.length>=2){var g;console.info("markers:",h.allmarkers.length);g=new a.maps.LatLngBounds(h.allmarkers[0].getPosition(),h.allmarkers[0].getPosition());for(var f=2;f<h.allmarkers.length;f++){g.extend(h.allmarkers[f].getPosition())}console.info("zoom:",j(h,g));h.setCenter(g.getCenter(),1);h.setZoom(j(h,g));return h}}};d.fn.hitomap=function(f){if(b[f]){return b[f].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof f==="object"||!f){return b.renderMap.apply(this,arguments)}else{d.error("Method "+f+" does not exist on jQuery.hitomap")}}};function e(j,i){i=(i===undefined||i===false)?false:true;var g=document.createElement("div");if(i){if(j.image&&j.momentPage){var h=j.image.medium;g.style.cssText="background: none repeat scroll 0 0 #FFFFFF; border: 0px solid #1c3456; width: 100px; height: 100px; overflow: hidden; padding: 0px; border-radius: 0px; color: #33332b; position: absolute; box-shadow: 0px 1px 4px rgba(0,0,0,0.7); left: -20px; top: -50px;";htmlContent='<a href="'+j.url+'"><img src='+h+' class="inline_map_image_small" /></a>'}else{if(j.image&&!j.momentPage){var h=j.image.medium;g.style.cssText="background: none repeat scroll 0 0 #FFFFFF; border: 0px solid #1c3456; width: 250px; height: 150px; overflow: hidden; padding: 0px; border-radius: 0px; color: #33332b; position: absolute; box-shadow: 0px 1px 4px rgba(0,0,0,0.7); left: -95px; top: -95px;";htmlContent='<a href="'+j.url+'"><img src='+h+' class="inline_map_image" /></a>'}else{var h=j.user.profileImage;g.style.cssText="background: none repeat scroll 0 0 #FFFFFF; border: 0px solid #1c3456; width: 100px; height: 100px; overflow: hidden; padding: 0px; border-radius: 0px; color: #33332b; position: absolute; box-shadow: 0px 1px 4px rgba(0,0,0,0.7); left: -25px; top: -45px;";htmlContent='<a href="'+j.url+'"><img src='+h+' class="inline_map_profile" /></a>'}}}else{var f="moment_text";if(j.isJapanese){f=f+" ja"}g.style.cssText="background: none repeat scroll 0 0 #fff; border: 1px solid #c4c4bc; padding: 10px 5px; padding-bottom: 3px; border-radius: 3px; color: #33332b; position: absolute; left: -90px; top: -85px; width:225px; height: 130px; text-align: center; overflow: hidden; box-shadow: 0px 3px 8px rgba(152,152,144,0.3);";htmlContent='<a href="'+j.url+'"><div class="mapmoment"><h4>'+j.place.city+", <strong> "+j.place.country+'</strong></h4><p class="'+f+'">'+j.text+"</p></div></a>"}g.innerHTML=htmlContent;return g}})(window.jQuery,window.google);